import React, { useState } from "react"; import { Input } from "@/components/ui/input"; import { Button } from "@/components/ui/button"; import { Card, CardContent } from "@/components/ui/card"; import { BarChart, Bar, XAxis, YAxis, Tooltip, Legend, ResponsiveContainer } from "recharts"; import { Select, SelectTrigger, SelectValue, SelectContent, SelectItem } from "@/components/ui/select"; import { Table, TableHeader, TableRow, TableHead, TableBody, TableCell } from "@/components/ui/table"; import { ScrollArea } from "@/components/ui/scroll-area"; import { MathComponent } from "mathjax-react";

const defaultCountries = [ { country: "India", capital: "New Delhi", population: 1393409038, region: "Asia" }, { country: "USA", capital: "Washington, D.C.", population: 331893745, region: "North America" }, { country: "France", capital: "Paris", population: 67391582, region: "Europe" }, ];

export default function CountryDataVisualizer() { const [countries, setCountries] = useState(defaultCountries); const [filterRegion, setFilterRegion] = useState(""); const [newCountry, setNewCountry] = useState({ country: "", capital: "", population: "", region: "" });

const filteredData = filterRegion ? countries.filter((item) => item.region === filterRegion) : countries;

const handleAddCountry = () => { if (!newCountry.country || !newCountry.capital || !newCountry.population || !newCountry.region) return; const updated = [ ...countries, { ...newCountry, population: parseInt(newCountry.population) }, ]; setCountries(updated); setNewCountry({ country: "", capital: "", population: "", region: "" }); };

const totalPopulation = filteredData.reduce((acc, curr) => acc + curr.population, 0); const meanPopulation = (totalPopulation / filteredData.length).toFixed(2);

return ( <div className="min-h-screen bg-black text-offwhite p-4 font-sans"> <h1 className="text-3xl font-bold mb-4">Country Statistics Dashboard</h1>

<div className="grid grid-cols-1 md:grid-cols-2 gap-4 mb-6">
    <Card className="bg-gray-800 text-offwhite">
      <CardContent className="p-4 space-y-2">
        <h2 className="text-xl font-semibold">Add a Country</h2>
        <Input
          placeholder="Country"
          value={newCountry.country}
          onChange={(e) => setNewCountry({ ...newCountry, country: e.target.value })}
        />
        <Input
          placeholder="Capital"
          value={newCountry.capital}
          onChange={(e) => setNewCountry({ ...newCountry, capital: e.target.value })}
        />
        <Input
          placeholder="Population"
          type="number"
          value={newCountry.population}
          onChange={(e) => setNewCountry({ ...newCountry, population: e.target.value })}
        />
        <Input
          placeholder="Region"
          value={newCountry.region}
          onChange={(e) => setNewCountry({ ...newCountry, region: e.target.value })}
        />
        <Button className="bg-offwhite text-black" onClick={handleAddCountry}>Add Country</Button>
      </CardContent>
    </Card>

    <Card className="bg-gray-800 text-offwhite">
      <CardContent className="p-4">
        <h2 className="text-xl font-semibold mb-2">Filter by Region</h2>
        <Select onValueChange={setFilterRegion}>
          <SelectTrigger className="bg-black text-offwhite border-gray-600">
            <SelectValue placeholder="Choose Region" />
          </SelectTrigger>
          <SelectContent className="bg-black text-offwhite">
            <SelectItem value="">All</SelectItem>
            {[...new Set(countries.map((c) => c.region))].map((region) => (
              <SelectItem key={region} value={region}>{region}</SelectItem>
            ))}
          </SelectContent>
        </Select>
      </CardContent>
    </Card>
  </div>

  <Card className="bg-gray-900 text-offwhite mb-6">
    <CardContent className="p-4">
      <h2 className="text-xl font-semibold mb-4">Country Data Table</h2>
      <ScrollArea className="max-h-64">
        <Table>
          <TableHeader>
            <TableRow>
              <TableHead>Country</TableHead>
              <TableHead>Capital</TableHead>
              <TableHead>Population</TableHead>
              <TableHead>Region</TableHead>
            </TableRow>
          </TableHeader>
          <TableBody>
            {filteredData.map((item, index) => (
              <TableRow key={index}>
                <TableCell>{item.country}</TableCell>
                <TableCell>{item.capital}</TableCell>
                <TableCell>{item.population.toLocaleString()}</TableCell>
                <TableCell>{item.region}</TableCell>
              </TableRow>
            ))}
          </TableBody>
        </Table>
      </ScrollArea>
    </CardContent>
  </Card>

  <Card className="bg-gray-900 text-offwhite mb-6">
    <CardContent className="p-4">
      <h2 className="text-xl font-semibold mb-4">Population Chart</h2>
      <ResponsiveContainer width="100%" height={300}>
        <BarChart data={filteredData}>
          <XAxis dataKey="country" stroke="#ccc" />
          <YAxis stroke="#ccc" />
          <Tooltip />
          <Legend />
          <Bar dataKey="population" fill="#8884d8" />
        </BarChart>
      </ResponsiveContainer>
    </CardContent>
  </Card>

  <Card className="bg-gray-900 text-offwhite">
    <CardContent className="p-4">
      <h2 className="text-xl font-semibold mb-2">Mathematical Analysis</h2>
      <p>Total Countries: {filteredData.length}</p>
      <p>Total Population: {totalPopulation.toLocaleString()}</p>
      <p>Mean Population: {meanPopulation.toLocaleString()}</p>
      <MathComponent tex={`\\text{Population Mean} = \\frac{${totalPopulation}}{${filteredData.length}} = ${meanPopulation}`} />
    </CardContent>
  </Card>
</div>

); }

            
